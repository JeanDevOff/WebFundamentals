<!DOCTYPE html>
<html>
  <head>
    <title>XMLHttpRequest mixed content example</title>
  </head>
  <body>
    <h1>
      XMLHttpRequest mixed content example!
    </h1>
    <p>
      View page over: <a href="http://localhost:8888/xmlhttprequest-example.html">HTTP</a> - <a href="https://localhost:4443/xmlhttprequest-example.html">HTTPS</a>
    </p>
    <p>
      This page constructs an HTTP URL dynamically in JavaScript, the URL is eventually used to load an insecure resource by XMLHttpRequest. When the xmlhttprequest-data.js file is requested by the browser, an attacker can inject code into the returned content and take control of the entire page. Thankfully, most modern browsers block this type of dangerous content by default and display an error in the JavaScript console. This can be seen when the page is viewed over HTTPS.
    </p>
    <div id="output">Waiting for data...</div>
    <!-- // [START snippet1] -->
    <script>
      var rootUrl = 'http://localhost:8888';
      var resources = {
        jsonData: '/xmlhttprequest-data.js'
      };
      var request = new XMLHttpRequest();
      request.addEventListener('load', function() {
        var jsonData = JSON.parse(request.responseText);
        document.getElementById('output').innerHTML += '<br>' + jsonData.data;
      });
      request.open('GET', rootUrl + resources.jsonData);
      request.send();
    </script>
    <!-- // [END snippet1] -->
  </body>
</html>
